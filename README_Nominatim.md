# سرویس موقعیت‌یابی Nominatim

این سند نحوه استفاده از سرویس جئوکدینگ Nominatim در ربات را توضیح می‌دهد. این سرویس امکان جستجوی مکان‌ها و تبدیل مختصات جغرافیایی به آدرس را فراهم می‌کند.

## مقدمه

[Nominatim](https://nominatim.org/) یک سرویس جئوکدینگ مبتنی بر داده‌های [OpenStreetMap](https://www.openstreetmap.org/) است که امکان جستجوی مکان‌ها بر اساس نام یا آدرس و همچنین تبدیل مختصات جغرافیایی به آدرس را فراهم می‌کند. این سرویس به صورت رایگان در دسترس است، اما محدودیت‌هایی در تعداد درخواست‌ها دارد.

## قابلیت‌های پیاده‌سازی شده

ربات از دو قابلیت اصلی سرویس Nominatim استفاده می‌کند:

### 1. جئوکدینگ (Geocoding)

این قابلیت به ربات امکان می‌دهد تا با جستجوی نام یک مکان یا آدرس، مختصات جغرافیایی آن را پیدا کند. کاربران می‌توانند سؤالاتی مانند موارد زیر بپرسند:

- موقعیت برج میلاد تهران کجاست؟
- آدرس دقیق دانشگاه تهران چیست؟
- میدان آزادی کجا قرار دارد؟

### 2. جئوکدینگ معکوس (Reverse Geocoding)

این قابلیت به ربات امکان می‌دهد تا با دریافت مختصات جغرافیایی (عرض و طول جغرافیایی)، آدرس و اطلاعات مکانی مربوط به آن نقطه را بازیابی کند. کاربران می‌توانند سؤالاتی مانند موارد زیر بپرسند:

- چه مکانی در مختصات 35.7474221, 51.3790751 قرار دارد؟
- آدرس نقطه با عرض جغرافیایی 35.6891 و طول جغرافیایی 51.3890 چیست؟

## سیاست استفاده از Nominatim

در پیاده‌سازی این سرویس، سیاست‌های استفاده از Nominatim طبق [مستندات رسمی](https://operations.osmfoundation.org/policies/nominatim/) رعایت شده است:

- حداکثر یک درخواست در ثانیه
- استفاده از User-Agent مناسب در هر درخواست
- ذکر اعتبار OpenStreetMap و Nominatim در پاسخ‌ها
- استفاده از مکانیسم کش برای کاهش تعداد درخواست‌ها (در نسخه‌های آینده)

## نمونه استفاده

### جستجوی یک مکان

```
موقعیت برج میلاد تهران کجاست؟
```

پاسخ ربات شامل اطلاعاتی مانند آدرس دقیق، مختصات جغرافیایی و سایر اطلاعات مرتبط با برج میلاد خواهد بود.

### جستجوی آدرس با مختصات

```
چه مکانی در مختصات 35.7474221, 51.3790751 قرار دارد؟
```

پاسخ ربات شامل نام مکان، آدرس دقیق و سایر اطلاعات مرتبط با این مختصات (که مربوط به برج میلاد تهران است) خواهد بود.

## مستندات بیشتر

- [مستندات رسمی Nominatim](https://nominatim.org/release-docs/latest/)
- [سیاست استفاده از Nominatim](https://operations.osmfoundation.org/policies/nominatim/)
- [مستندات API Nominatim](https://nominatim.org/release-docs/latest/api/Overview/)

## محدودیت‌ها

- سرویس Nominatim ممکن است در برخی موارد نتواند همه مکان‌ها را به درستی شناسایی کند، به خصوص اگر نام مکان بسیار عمومی باشد یا در داده‌های OpenStreetMap وجود نداشته باشد.
- جستجوی مکان‌ها به زبان فارسی در برخی موارد ممکن است نتایج محدودتری نسبت به جستجو به زبان انگلیسی داشته باشد.
- محدودیت تعداد درخواست (یک درخواست در ثانیه) ممکن است در مواردی که تعداد زیادی از کاربران همزمان درخواست‌های مرتبط با موقعیت‌یابی دارند، باعث کندی پاسخ‌ها شود. 